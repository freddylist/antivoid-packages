# Template file for 'grapejuice-git'
pkgname=grapejuice-git
_reponame=grapejuice
version=20231230
revision=1
_commit=208e82256a3ed047297f2fdd050052a83da4bb3f
archs="i686 x86_64"
build_style=python3-module
hostmakedepends="tar python3-setuptools python3-pip gettext"
depends="python3-psutil python3-gobject python3-wheel python3-requests python3-Unidecode python3-click python3-pydantic"
short_desc="Wine wrapper for Roblox"
maintainer="Freddy List <antivoid-packages@freddylist.xyz>"
license="GPL-3.0-only"
homepage="https://brinkervii.gitlab.io/grapejuice/"
distfiles="https://gitlab.com/brinkervii/${_reponame}/-/archive/${_commit}/${_reponame}-${_commit}.tar.gz"
checksum=e7935b1e4e8087bf710c09c04e288b26a010a3a41f4b71ec9a0ff63963d8331d
conflicts=grapejuice
make_check=no # The tests are stupid

do_install() {
	export PYTHONPATH="${wrksrc}/src"
	python3 -m grapejuice_packaging linux_package
	vmkdir "${py3_sitelib}"
	tar -xf dist/linux_package/*.tar.gz -C "${DESTDIR}"
	mv "${DESTDIR}/usr/lib/python3/dist-packages"/* "${DESTDIR}/${py3_sitelib}"
}
